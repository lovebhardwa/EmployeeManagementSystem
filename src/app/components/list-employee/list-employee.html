<div class="form-color min-vh-100">
    <div class="form-color">
        <h1 class="text-center color  fw-4 p-2 ">Employee Management System</h1>
        <div class="form-check fs-4 m-2  ">
            <label class="">
                <input type="radio" name="gender" id="view" (click)="table()"> Table View
            </label>
            <label>
                <input type="radio" name="gender" id="view" (click)="card()"> Card View
            </label>
        </div>
        <!-- Button trigger modal -->   
        <div class="d-flex justify-content-end ">

            <div class=" col-2 p-2 justify-content-end ">
                <select class="form-select" id="filterDropdown" (change)="filterByDepartment($event)">
                    <option value="">DepartmentName</option>
                    <option value="IT-Intern">IT-Intern</option>
                    <option value="Full Stack Developer">Full Stack Developer</option>
                    <option value="Frontend">Frontend</option>
                    <option value="Developer">Developer</option>
                    <option value="IT-Developer Intern">IT-Developer Intern</option>
                </select>

            </div>
            <form class="d-flex col-2 p-2 text-end" role="search">
                <input class="form-control me-2" type="search" placeholder="Search" [(ngModel)]="searchedString"
                    name="searchedString" aria-label="Search" />
                <button class="btn btn-outline-success" (click)="searchEmployee($event)" type="submit">Search</button>
            </form>
        </div>
        <div class="d-flex justify-content-between">
            <h3 class=" p-3"> Employee List</h3>
            <div><button type="button" class="btn btn-primary fs-5 m-2  p-2 mx-5 " data-bs-toggle="modal"
                    data-bs-target="#myModal" (click)="changeButton()">
                    Add Employee
                </button>
            </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-header">
                        <h5 class="modal-title " id="modalLabel">{{modaltitle}} Data</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body ">

                        <form [formGroup]="addemployee " (ngSubmit)="condition()"
                            class=" d-flex  flex-column  align-iteam-center justify-content-center  ">
                            <div class="mb-3 row">

                                <input type="text" class="form-control col mx-1 border-dark"
                                    formControlName="employeeId" placeholder="EmployeeId">
                                <input type="text" class="form-control col mx-1 border-dark" formControlName="fullname"
                                    placeholder="FullName">

                            </div>

                            <div class="mb-3 row">

                                <input type="email" class="form-control col mx-1 border-dark" formControlName="email"
                                    placeholder="Email">
                                <input type="number" class="form-control col mx-1 border-dark" formControlName="phone"
                                    placeholder="Phone">
                              </div>

                            <div class="mb-3 row">

                                <input type="text" class="form-control col mx-1 border-dark" formControlName="gender"
                                    placeholder="Gender">
                                <input type="text" class="form-control col mx-1 border-dark"
                                    formControlName="employeeType" placeholder="EmployeeType">
                            </div>

                            <div class="mb-3 row">

                                <input type="number" class="form-control col mx-1 border-dark" formControlName="salary"
                                    placeholder="Salary">
                                <input type="text" class="form-control col mx-1 border-dark"
                                    formControlName="departmentname" placeholder="departmentName">
                            </div>


                            <div class="text-center">
                                <button type="submit" class="btn btn-primary"
                                    data-bs-dismiss="modal">{{modalbutton}}</button>
                            </div>
                        </form> 
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="deletemodal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Are You Sure?</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                            (click)="deleteemployeefromdatabase()">Yes</button>
                    </div>
                </div>
            </div>
        </div>

        @if(istable==true){
        <div class="mat-elevation-z8 m-2">
            <table mat-table [dataSource]="dataSource">
                <!-- Position Column -->
                <ng-container matColumnDef="employeeId">
                    <th mat-header-cell *matHeaderCellDef> employeeId </th>
                    <td mat-cell *matCellDef="let element"> {{element.employeeId}} </td>
                </ng-container>

                <!-- Name Column -->
                <ng-container matColumnDef="fullname">
                    <th mat-header-cell *matHeaderCellDef> fullname </th>
                    <td mat-cell *matCellDef="let element"> {{element.fullname}} </td>
                </ng-container>

                <!-- Weight Column -->
                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef> email </th>
                    <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="phone">
                    <th mat-header-cell *matHeaderCellDef> phone </th>
                    <td mat-cell *matCellDef="let element"> {{element.phone}} </td>
                </ng-container>
                <ng-container matColumnDef="gender">
                    <th mat-header-cell *matHeaderCellDef> gender </th>
                    <td mat-cell *matCellDef="let element"> {{element.gender}} </td>
                </ng-container>
                <ng-container matColumnDef="employeeType">
                    <th mat-header-cell *matHeaderCellDef> employeeType </th>
                    <td mat-cell *matCellDef="let element"> {{element.employeeType}} </td>
                </ng-container>
                <ng-container matColumnDef="salary">
                    <th mat-header-cell *matHeaderCellDef> Salary </th>
                    <td mat-cell *matCellDef="let element"> {{element.salary}} </td>
                </ng-container>
                <ng-container matColumnDef="departmentname">
                    <th mat-header-cell *matHeaderCellDef> departmentname </th>
                    <td mat-cell *matCellDef="let element"> {{element.departmentname}} </td>
                </ng-container>
                <ng-container matColumnDef="Action">
                    <th mat-header-cell *matHeaderCellDef> Action </th>
                    <td mat-cell *matCellDef="let element"> <button class="btn btn-primary m-1"
                            (click)="updatedata(element.id)" data-bs-toggle="modal" data-bs-target="#myModal">
                            <mat-icon>edit</mat-icon> </button>
                        <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deletemodal"
                            (click)="deleteemployee(element.id)"><mat-icon>delete</mat-icon></button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>

            <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons
                aria-label="Select page of periodic elements">
            </mat-paginator>
        </div>
        }
        @else{
        <div class="customFraction d-grid gap-3">

            @for(employee of filteredEmployees; track employee){
            <div class="card light shadow">
                <div class="m-2 d-flex justify-content-between border-bottom pb-2  ">
                    <td scope="col"><button class="btn btn-primary m-1" (click)="updatedata(employee.id)"
                            data-bs-toggle="modal" data-bs-target="#myModal"> <mat-icon>edit</mat-icon> </button>
                        <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deletemodal"
                            (click)="deleteemployee(employee.id)"><mat-icon>delete</mat-icon></button>
                    </td>
                </div>
                <div class="row ">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-12">

                        <ul class="list-group list-group-flush">
                            <li class="list-group-item light">EmployeeId : {{employee.employeeId}}</li>
                            <li class="list-group-item light">FullName : {{employee.fullname}}</li>
                            <li class="list-group-item light">Email : {{employee.email}}</li>
                            <li class="list-group-item light">Phone : {{employee.phone}}</li>
                            <li class="list-group-item light">Gender : {{employee.gender}}</li>
                            <li class="list-group-item light">EmployeeType : {{employee.employeeType}}</li>
                            <li class="list-group-item light">Salary : {{employee.salary}}</li>
                            <li class="list-group-item light">DepartmentName : {{employee.departmentname}}</li>
                        </ul>
                    </div>
                </div>
            </div>
            }
        </div>
        }
    </div>